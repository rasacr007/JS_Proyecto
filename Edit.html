<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Contactos</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">


<style>
  .btn-default {
      background: #fff;
      color: #ff0000;
   }
  .btn-default:hover {
      background: #ff0000;
      color: #fff;
   }
  </style>

  </head>
  <body>


<div class="container">
  <h2>Contactos</h2>
  <form class="form-horizontal" role="form">

    <div class="form-group">
      <label class="control-label col-sm-2" for="nombre">Nombre:</label>
	<div class="col-xs-3">
        <input type="text" class="form-control" id="nombre" required placeholder="Digite Nombre" size="10" >
      </div>
    </div>
    <div class="form-group">

      <label class="control-label col-sm-2" for="apellido">Apellido:</label>
	<div class="col-xs-3">
        <input type="text" class="form-control" id="apellido" placeholder="Digite Apellido">
      </div>
    </div>
    <div class="form-group">

	      <label class="control-label col-sm-2" for="email">Email:</label>
	<div class="col-xs-3">
	        <input type="email" class="form-control" id="email" required placeholder="Digite Email">
	    </div>
    </div>

    <div class="form-group">

      <label class="control-label col-sm-2" for="telefono">Telefono:</label>
	<div class="col-xs-3">
        <input type="tel" class="form-control" id="telefono" required placeholder="Digite Telefono" pattern= "\d{4}[\-]\d{4}" title="El formato es 9999-9999">

    </div>
    </div>

      <div class="col-sm-offset-2 col-sm-10">
        <button type="summit" id="guardar" class="btn btn-success  btn-lg data-loading-text="Guardando..." data-complete-text="Finalizado!">Guardar</button>
        <button type="button" id="cancelar" class="btn btn-default  btn-lg">Cancelar</button>
      </div>
    </div>
  </form>
</div>







           <script src="js/jquery.js"></script>
           <script src="js/Agenda.js"></script>
           <script src="js/bootstrap.min.js"></script>

    <script>
      $(document).ready(function(){
        var objAgenda = new Agenda();
        var obj =objAgenda.cargarDatosPrueba();
        accionPantalla=getParameterByName("accion",  window.location.href);
        if (accionPantalla==2){
          var x = cargarDatos();
        };
        document.getElementById("cancelar").addEventListener("click", volverPagina);
        document.getElementById("guardar").addEventListener("click", guardar);
      });

      var accionPantalla;


      function volverPagina(){
          javascript:history.back(-1);
      };

      function cargarDatos(){

        var param = getParameterByName("position",  window.location.href);
        var objAgenda = new Agenda();
        var obj= objAgenda.listarContacto(param);
            document.getElementById("nombre").value=obj.name;
            document.getElementById("apellido").value=obj.lastName;
            document.getElementById("email").value=obj.email;
            document.getElementById("telefono").value=obj.phone;
       }

       function guardar(){
         var objAgenda = new Agenda();
         if (accionPantalla ==1){
            objAgenda.crearContacto(document.getElementById("nombre").value,
            document.getElementById("apellido").value,
            document.getElementById("email").value,
            document.getElementById("telefono").value);
         }
         else {
           objAgenda.editarContacto(document.getElementById("nombre").value,
           document.getElementById("apellido").value,
           document.getElementById("email").value,
           document.getElementById("telefono").value);
         }




       }
       function getParameterByName(name, url) {
           if (!url) url = window.location.href;
           name = name.replace(/[\[\]]/g, "\\$&");
           var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)", "i"),
               results = regex.exec(url);
           if (!results) return null;
           if (!results[2]) return '';
           return decodeURIComponent(results[2].replace(/\+/g, " "));
       }

    </script>




  </body>
</html>
